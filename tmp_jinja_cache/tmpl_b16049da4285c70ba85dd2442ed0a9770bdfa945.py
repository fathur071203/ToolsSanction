from jinja2.runtime import LoopContext, Macro, Markup, Namespace, TemplateNotFound, TemplateReference, TemplateRuntimeError, Undefined, escape, identity, internalcode, markup_join, missing, str_join
name = 'wizard_step1_upload.html'

def root(context, missing=missing):
    resolve = context.resolve_or_missing
    undefined = environment.undefined
    concat = environment.concat
    cond_expr_undefined = Undefined
    if 0: yield None
    parent_template = None
    pass
    parent_template = environment.get_template('base.html', 'wizard_step1_upload.html')
    for name, parent_block in parent_template.blocks.items():
        context.blocks.setdefault(name, []).append(parent_block)
    yield from parent_template.root_render_func(context)

def block_head(context, missing=missing):
    resolve = context.resolve_or_missing
    undefined = environment.undefined
    concat = environment.concat
    cond_expr_undefined = Undefined
    if 0: yield None
    _block_vars = {}
    pass
    yield '\n<style>\n  /* Bulk Screening Wizard - Simplified Single Step */\n  .wizard-container {\n    max-width: 800px;\n    margin: 0 auto;\n  }\n\n  .wizard-header {\n    margin-bottom: 2rem;\n    text-align: center;\n  }\n\n  .wizard-title h1 {\n    font-size: 1.75rem;\n    font-weight: 700;\n    color: var(--text-primary);\n    margin-bottom: 0.5rem;\n  }\n\n  .wizard-title p {\n    color: var(--text-secondary);\n    font-size: 0.95rem;\n  }\n\n  /* Simplified to show only sanction selection first */\n  .step-sanction-selection {\n    display: block;\n  }\n\n  .step-screening-form {\n    display: none;\n  }\n\n  .step-sanction-selection.hidden,\n  .step-screening-form.hidden {\n    display: none;\n  }\n\n  .step-sanction-selection.active {\n    display: block;\n  }\n\n  .step-screening-form.active {\n    display: block;\n  }\n\n  /* Sanction Mode Selection - Large Buttons */\n  .sanction-mode-cards {\n    display: grid;\n    grid-template-columns: 1fr 1fr;\n    gap: 1.5rem;\n    margin-bottom: 2rem;\n  }\n\n  .mode-card {\n    background-color: var(--surface);\n    border: 3px solid var(--border);\n    border-radius: 16px;\n    padding: 2.5rem 2rem;\n    text-align: center;\n    cursor: pointer;\n    transition: all 0.3s ease;\n    position: relative;\n    overflow: hidden;\n  }\n\n  .mode-card:hover {\n    border-color: var(--primary-accent);\n    transform: translateY(-4px);\n    box-shadow: 0 8px 24px rgba(14, 165, 233, 0.15);\n  }\n\n  .mode-card.selected {\n    border-color: var(--primary-accent);\n    background-color: rgba(14, 165, 233, 0.05);\n  }\n\n  .mode-card-icon {\n    font-size: 3rem;\n    margin-bottom: 1rem;\n    display: block;\n  }\n\n  .mode-card-title {\n    font-size: 1.25rem;\n    font-weight: 600;\n    color: var(--text-primary);\n    margin-bottom: 0.5rem;\n  }\n\n  .mode-card-desc {\n    font-size: 0.9rem;\n    color: var(--text-secondary);\n    line-height: 1.5;\n  }\n\n  .mode-card-badge {\n    position: absolute;\n    top: 1rem;\n    right: 1rem;\n    background-color: var(--success);\n    color: white;\n    padding: 0.25rem 0.75rem;\n    border-radius: 12px;\n    font-size: 0.75rem;\n    font-weight: 600;\n  }\n\n  /* Form Card */\n  .form-card {\n    background-color: var(--surface);\n    border: 1px solid var(--border);\n    border-radius: 12px;\n    padding: 2rem;\n    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);\n    margin-bottom: 2rem;\n  }\n\n  .form-section-title {\n    font-size: 1.25rem;\n    font-weight: 600;\n    color: var(--text-primary);\n    margin-bottom: 1.5rem;\n    display: flex;\n    align-items: center;\n    gap: 0.75rem;\n  }\n\n  .form-section-icon {\n    width: 32px;\n    height: 32px;\n    background-color: rgba(14, 165, 233, 0.1);\n    border-radius: 6px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    font-size: 1.2rem;\n  }\n\n  .section-divider {\n    height: 1px;\n    background: linear-gradient(to right, transparent, var(--border), transparent);\n    margin: 2.5rem 0;\n  }\n\n  .info-box {\n    background-color: rgba(14, 165, 233, 0.05);\n    border-left: 4px solid var(--primary-accent);\n    border-radius: 6px;\n    padding: 1rem;\n    margin-bottom: 1.5rem;\n    color: var(--text-primary);\n    font-size: 0.9rem;\n    line-height: 1.6;\n  }\n\n  /* File Upload Area */\n  .file-upload-area {\n    border: 2px dashed var(--border);\n    border-radius: 12px;\n    padding: 3rem 2rem;\n    text-align: center;\n    background-color: rgba(14, 165, 233, 0.02);\n    transition: all 0.3s ease;\n    cursor: pointer;\n  }\n\n  .file-upload-area:hover {\n    border-color: var(--primary-accent);\n    background-color: rgba(14, 165, 233, 0.06);\n  }\n\n  .file-upload-area.dragover {\n    border-color: var(--primary-accent);\n    background-color: rgba(14, 165, 233, 0.1);\n    box-shadow: inset 0 0 12px rgba(14, 165, 233, 0.1);\n  }\n\n  .file-upload-icon {\n    font-size: 2.5rem;\n    margin-bottom: 1rem;\n    display: block;\n  }\n\n  .file-upload-area h3 {\n    font-size: 1rem;\n    font-weight: 600;\n    color: var(--text-primary);\n    margin-bottom: 0.5rem;\n  }\n\n  .file-upload-area p {\n    color: var(--text-secondary);\n    font-size: 0.9rem;\n    margin-bottom: 0;\n  }\n\n  .file-upload-area input[type="file"] {\n    display: none;\n  }\n\n  /* Sanction DB Info Display */\n  .sanction-db-summary {\n    background-color: rgba(16, 185, 129, 0.05);\n    border: 1px solid var(--success);\n    border-radius: 8px;\n    padding: 1rem;\n    margin-bottom: 1.5rem;\n  }\n\n  .db-summary-title {\n    font-weight: 600;\n    color: var(--text-primary);\n    margin-bottom: 0.75rem;\n    display: flex;\n    align-items: center;\n    gap: 0.5rem;\n  }\n\n  .db-summary-grid {\n    display: grid;\n    grid-template-columns: repeat(3, 1fr);\n    gap: 1rem;\n  }\n\n  .db-summary-item {\n    text-align: center;\n  }\n\n  .db-summary-label {\n    font-size: 0.75rem;\n    color: var(--text-light);\n    display: block;\n    margin-bottom: 0.25rem;\n  }\n\n  .db-summary-value {\n    font-size: 1rem;\n    font-weight: 600;\n    color: var(--text-primary);\n  }\n\n  /* Upload sanction section for new upload mode */\n  .sanction-upload-form {\n    margin-bottom: 1.5rem;\n  }\n\n  /* Threshold Configuration */\n  .threshold-group {\n    background-color: var(--background);\n    border: 1px solid var(--border);\n    border-radius: 8px;\n    padding: 1.5rem;\n  }\n\n  .threshold-input-row {\n    display: grid;\n    grid-template-columns: 1fr auto;\n    gap: 1rem;\n    align-items: center;\n    margin-bottom: 1rem;\n  }\n\n  .threshold-value-display {\n    font-size: 1.75rem;\n    font-weight: 800;\n    color: var(--primary-accent);\n    text-align: center;\n    padding: 0.75rem 1.25rem;\n    background-color: var(--surface);\n    border-radius: 8px;\n    min-width: 100px;\n    border: 2px solid rgba(14, 165, 233, 0.2);\n  }\n\n  .form-control[type="range"] {\n    width: 100%;\n    height: 8px;\n    border-radius: 4px;\n    background: linear-gradient(to right, #ef4444, #f59e0b, #10b981);\n    outline: none;\n    -webkit-appearance: none;\n    appearance: none;\n  }\n\n  .form-control[type="range"]::-webkit-slider-thumb {\n    -webkit-appearance: none;\n    appearance: none;\n    width: 24px;\n    height: 24px;\n    border-radius: 50%;\n    background-color: var(--primary-accent);\n    cursor: pointer;\n    box-shadow: 0 2px 8px rgba(14, 165, 233, 0.3);\n    border: 3px solid white;\n  }\n\n  .form-control[type="range"]::-moz-range-thumb {\n    width: 24px;\n    height: 24px;\n    border-radius: 50%;\n    background-color: var(--primary-accent);\n    cursor: pointer;\n    box-shadow: 0 2px 8px rgba(14, 165, 233, 0.3);\n    border: 3px solid white;\n  }\n\n  .threshold-info {\n    display: grid;\n    grid-template-columns: 1fr 1fr;\n    gap: 1rem;\n    margin-top: 1rem;\n  }\n\n  .threshold-info-item {\n    padding: 0.75rem;\n    background-color: var(--surface);\n    border-radius: 6px;\n    border-left: 3px solid var(--primary-accent);\n  }\n\n  .threshold-info-label {\n    font-size: 0.8rem;\n    color: var(--text-light);\n    font-weight: 500;\n  }\n\n  .threshold-info-value {\n    font-size: 0.95rem;\n    font-weight: 600;\n    color: var(--text-primary);\n    margin-top: 0.25rem;\n  }\n\n  .form-text {\n    margin-top: 0.5rem;\n    font-size: 0.85rem;\n    color: var(--text-light);\n  }\n\n  .form-actions {\n    display: flex;\n    gap: 1rem;\n    justify-content: space-between;\n    margin-top: 2rem;\n  }\n\n  .form-actions .btn {\n    flex: 1;\n    padding: 0.75rem 1.5rem;\n  }\n\n  .btn-submit {\n    background-color: var(--primary-accent);\n    color: white;\n    font-weight: 600;\n  }\n\n  .btn-submit:hover:not(:disabled) {\n    background-color: #0284c7;\n    transform: translateY(-2px);\n    box-shadow: 0 4px 12px rgba(14, 165, 233, 0.3);\n  }\n\n  .btn-submit:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n\n  .btn-back {\n    background-color: transparent;\n    border: 1px solid var(--border);\n    color: var(--text-primary);\n  }\n\n  .btn-back:hover {\n    background-color: var(--background);\n  }\n\n  @media (max-width: 768px) {\n    .sanction-mode-cards {\n      grid-template-columns: 1fr;\n    }\n\n    .form-card {\n      padding: 1.5rem;\n    }\n\n    .file-upload-area {\n      padding: 2rem 1.5rem;\n    }\n\n    .threshold-input-row {\n      grid-template-columns: 1fr;\n    }\n\n    .threshold-info,\n    .db-summary-grid {\n      grid-template-columns: 1fr;\n    }\n\n    .form-actions {\n      flex-direction: column;\n    }\n\n    .form-actions .btn {\n      width: 100%;\n    }\n  }\n</style>\n'

def block_content(context, missing=missing):
    resolve = context.resolve_or_missing
    undefined = environment.undefined
    concat = environment.concat
    cond_expr_undefined = Undefined
    if 0: yield None
    _block_vars = {}
    l_0_url_for = resolve('url_for')
    pass
    yield '\n<div class="wizard-container">\n  <div class="wizard-header">\n    <div class="wizard-title">\n      <h1>Bulk Screening</h1>\n      <p>Screening transaksi batch terhadap sanction list</p>\n    </div>\n  </div>\n\n  <div class="step-sanction-selection active" id="stepSanctionSelection">\n    <div class="form-card">\n      <div class="form-section-title">\n        <div class="form-section-icon">üõ°Ô∏è</div>\n        Pilih Sumber Sanction List\n      </div>\n\n      <div class="sanction-mode-cards">\n        <div class="mode-card" onclick="selectSanctionMode(\'db\')">\n          <span class="mode-card-badge">Recommended</span>\n          <span class="mode-card-icon">‚úì</span>\n          <div class="mode-card-title">Gunakan Database</div>\n          <div class="mode-card-desc">\n            Gunakan sanction list terbaru yang sudah tersimpan di database\n          </div>\n        </div>\n\n        <div class="mode-card" onclick="selectSanctionMode(\'upload\')">\n          <span class="mode-card-icon">‚¨Ü</span>\n          <div class="mode-card-title">Upload Baru</div>\n          <div class="mode-card-desc">\n            Upload file sanction list baru untuk screening ini\n          </div>\n        </div>\n      </div>\n\n      <div class="form-actions">\n        <a href="'
    yield escape(context.call((undefined(name='url_for') if l_0_url_for is missing else l_0_url_for), 'web.index', _block_vars=_block_vars))
    yield '" class="btn btn-back">‚Üê Kembali</a>\n      </div>\n    </div>\n  </div>\n\n  <div class="step-screening-form" id="stepScreeningForm">\n    <form method="post" action="'
    yield escape(context.call((undefined(name='url_for') if l_0_url_for is missing else l_0_url_for), 'web.bulk_screening_submit', _block_vars=_block_vars))
    yield '" enctype="multipart/form-data" id="screeningForm">\n      <input type="hidden" name="sanction_mode" id="sanctionModeInput" value="">\n      \n      <div class="form-card">\n        <!-- Sanction List Summary (for DB mode) or Upload (for upload mode) -->\n        <div class="form-section-title">\n          <div class="form-section-icon">üõ°Ô∏è</div>\n          Sanction List\n        </div>\n\n        <!-- DB Mode Summary -->\n        <div class="sanction-db-summary" id="dbSummary" style="display: none;">\n          <div class="db-summary-title">\n            ‚úì Menggunakan Database Sanction List\n          </div>\n          <div class="db-summary-grid">\n            <div class="db-summary-item">\n              <span class="db-summary-label">Version</span>\n              <span class="db-summary-value">Dec 2025</span>\n            </div>\n            <div class="db-summary-item">\n              <span class="db-summary-label">Last Updated</span>\n              <span class="db-summary-value">2 jam lalu</span>\n            </div>\n            <div class="db-summary-item">\n              <span class="db-summary-label">Total Entities</span>\n              <span class="db-summary-value">12,543</span>\n            </div>\n          </div>\n        </div>\n\n        <!-- Upload Mode Form -->\n        <div class="sanction-upload-form" id="uploadSanctionForm" style="display: none;">\n          <label class="form-label">Upload Sanction List File</label>\n          <input type="file" name="sanction_file" id="sanctionFileInput" accept=".txt,.csv" class="form-control">\n          <div class="form-text">Format: .txt atau .csv dengan header yang sesuai</div>\n        </div>\n\n        <div class="section-divider"></div>\n\n        <!-- Upload Transaksi -->\n        <div class="form-section-title">\n          <div class="form-section-icon">üìÅ</div>\n          Upload File Transaksi\n        </div>\n\n        <div class="info-box">\n          <strong>Format File yang Diterima:</strong>\n          <ul>\n            <li>Format: Text (.txt) atau CSV (.csv)</li>\n            <li>Header: transaction_id, sender_name, sender_dob, sender_citizenship, receiver_name, receiver_dob, receiver_citizenship</li>\n            <li>Maksimal 1 juta baris per file</li>\n          </ul>\n        </div>\n\n        <div class="file-upload-area" id="uploadArea" ondrop="handleDrop(event)" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)">\n          <span class="file-upload-icon">üì§</span>\n          <h3>Drag & Drop atau Klik untuk Upload</h3>\n          <p>Pilih file transaksi (.txt atau .csv)</p>\n          <input type="file" id="fileInput" name="transaction_file" accept=".txt,.csv" onchange="handleFileSelect(event)" required>\n        </div>\n\n        <div class="section-divider"></div>\n\n        <!-- Threshold Configuration -->\n        <div class="form-section-title">\n          <div class="form-section-icon">üéØ</div>\n          Threshold Configuration\n        </div>\n\n        <div class="threshold-group">\n          <label class="form-label">Final Score Threshold</label>\n          <div class="threshold-input-row">\n            <input type="range" name="threshold_score" class="form-control" value="60" min="0" max="100" \n                   oninput="updateThresholdDisplay(this, \'finalDisplay\')">\n            <div class="threshold-value-display" id="finalDisplay">60%</div>\n          </div>\n\n          <div class="form-text">\n            Skor minimum gabungan (nama + DOB + kewarganegaraan) untuk dianggap potential match.\n          </div>\n\n          <div class="threshold-info">\n            <div class="threshold-info-item">\n              <div class="threshold-info-label">Luas (Banyak hasil)</div>\n              <div class="threshold-info-value">40-50%</div>\n            </div>\n            <div class="threshold-info-item">\n              <div class="threshold-info-label">Rekomendasi</div>\n              <div class="threshold-info-value">50-65%</div>\n            </div>\n          </div>\n        </div>\n\n        <div class="form-actions">\n          <button type="button" class="btn btn-back" onclick="backToSelection()">‚Üê Ubah Sanction List</button>\n          <button type="submit" class="btn btn-submit" id="submitBtn" disabled>Mulai Screening ‚Üí</button>\n        </div>\n      </div>\n    </form>\n  </div>\n</div>\n\n<script>\n  let selectedMode = \'\';\n\n  function selectSanctionMode(mode) {\n    selectedMode = mode;\n    document.getElementById(\'sanctionModeInput\').value = mode;\n    \n    // Hide selection, show form\n    document.getElementById(\'stepSanctionSelection\').classList.remove(\'active\');\n    document.getElementById(\'stepSanctionSelection\').classList.add(\'hidden\');\n    document.getElementById(\'stepScreeningForm\').classList.add(\'active\');\n    document.getElementById(\'stepScreeningForm\').classList.remove(\'hidden\');\n    \n    // Show appropriate section\n    if (mode === \'db\') {\n      document.getElementById(\'dbSummary\').style.display = \'block\';\n      document.getElementById(\'uploadSanctionForm\').style.display = \'none\';\n      document.getElementById(\'sanctionFileInput\').removeAttribute(\'required\');\n    } else {\n      document.getElementById(\'dbSummary\').style.display = \'none\';\n      document.getElementById(\'uploadSanctionForm\').style.display = \'block\';\n      document.getElementById(\'sanctionFileInput\').setAttribute(\'required\', \'required\');\n    }\n  }\n\n  function backToSelection() {\n    document.getElementById(\'stepScreeningForm\').classList.remove(\'active\');\n    document.getElementById(\'stepScreeningForm\').classList.add(\'hidden\');\n    document.getElementById(\'stepSanctionSelection\').classList.add(\'active\');\n    document.getElementById(\'stepSanctionSelection\').classList.remove(\'hidden\');\n    \n    // Reset form\n    document.getElementById(\'screeningForm\').reset();\n    document.getElementById(\'submitBtn\').disabled = true;\n    \n    const uploadArea = document.getElementById(\'uploadArea\');\n    uploadArea.innerHTML = `<span class="file-upload-icon">üì§</span><h3>Drag & Drop atau Klik untuk Upload</h3><p>Pilih file transaksi (.txt atau .csv)</p><input type="file" id="fileInput" name="transaction_file" accept=".txt,.csv" onchange="handleFileSelect(event)" required>`;\n  }\n\n  const uploadArea = document.getElementById(\'uploadArea\');\n  const fileInput = document.getElementById(\'fileInput\');\n  const submitBtn = document.getElementById(\'submitBtn\');\n\n  uploadArea.addEventListener(\'click\', () => fileInput.click());\n\n  function handleDragOver(e) {\n    e.preventDefault();\n    uploadArea.classList.add(\'dragover\');\n  }\n\n  function handleDragLeave(e) {\n    e.preventDefault();\n    uploadArea.classList.remove(\'dragover\');\n  }\n\n  function handleDrop(e) {\n    e.preventDefault();\n    uploadArea.classList.remove(\'dragover\');\n    const files = e.dataTransfer.files;\n    if (files.length > 0) {\n      const newFileInput = document.getElementById(\'fileInput\');\n      newFileInput.files = files;\n      handleFileSelect();\n    }\n  }\n\n  function handleFileSelect() {\n    const file = document.getElementById(\'fileInput\').files[0];\n    if (file) {\n      submitBtn.disabled = false;\n      uploadArea.innerHTML = `<span class="file-upload-icon">‚úì</span><h3>${file.name}</h3><p style="color: var(--success); margin-bottom: 0;">File dipilih</p>`;\n    }\n  }\n\n  function updateThresholdDisplay(input, displayId) {\n    document.getElementById(displayId).textContent = input.value + \'%\';\n  }\n</script>\n'

blocks = {'head': block_head, 'content': block_content}
debug_info = '1=12&3=17&416=27&452=37&458=39'